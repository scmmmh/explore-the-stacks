<!DOCTYPE html>
<html xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="layout.html"/>
  <head py:with="key='2e93c237dd6bb16294b7df4e6be9578f';secret='16088fdc45ee2c2f'">
    <title>Shelfmarks: ${shelf.start} - ${shelf.end}</title>
    <script>
      $(document).ready(function() {
          $('ol.books').illustrationBrowser({
        	  flickr: {
        		  url: "https://api.flickr.com/services/rest/",
        		  key: "${key}"
        	  },
        	  spinner: "${r.static_url('ets:static/img/spinner.gif')}"
          });
      });
    </script>
  </head>
  <body>
    <header>
      <div class="return"><a py:if="shelf.parent" href="${r.route_url('shelf', sid=shelf.parent.id, _query=r.params)}">&larr; Back to ${h.shelf_title(shelf.parent)}</a></div>
      <h1>Shelfmarks: ${shelf.start} - ${shelf.end}</h1>
      <h2>Keywords: ${shelf.keywords}</h2>
    </header>
    <article>
      <div class="intra-shelf">
        <a py:if="prev" href="${r.route_url('shelf', sid=prev.id, _query=r.params)}">&uarr; Previous shelf &uarr;</a>
        <span py:if="not prev">&uarr; Previous shelf &uarr;</span>
      </div>
      <ol class="books">
        <li py:for="book in books" class="type-${'result' if book.id in matches else 'shelf'}">
          <div class="content">${' '.join(book.attrs['title'])}</div><!--
          --><div class="overlay"><a href="#" data-id="${book.id}" data-illustrations="${h.json.dumps([i.flickr_id for i in book.illustrations])}" title="${' '.join(book.attrs['title'])}">${' '.join(book.attrs['title'])}</a></div>
        </li>
      </ol>
      <div class="intra-shelf">
        <a py:if="next" href="${r.route_url('shelf', sid=next.id, _query=r.params)}">&darr; Next shelf &darr;</a>
        <span py:if="not next">&darr; Next shelf &darr;</span>
      </div>
    </article>
  </body>
</html>